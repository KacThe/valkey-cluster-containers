- name: Set test_clusters
  set_fact:
    clusters:
      - "192.168.0.4:2180 192.168.0.4:2181 192.168.0.4:2182 -a {{ valkey_password }}"
      - "192.168.0.4:2190 192.168.0.4:2191 192.168.0.4:2192 -a {{ valkey_password }}"
      - "192.168.0.4:2170 192.168.0.4:2171 192.168.0.4:2172 -a {{ valkey_password }}"
      - "192.168.0.4:2160 192.168.0.4:2161 192.168.0.4:2162 -a {{ valkey_password }}"
      - "192.168.0.4:2150 192.168.0.4:2151 192.168.0.4:2152 -a {{ valkey_password }}"
      - "192.168.0.4:2140 192.168.0.4:2141 192.168.0.4:2142 -a {{ valkey_password }}"

- name: Run cluster creation for test
  shell: "yes yes | valkey-cli --cluster create {{ item }}"
  loop: "{{ clusters }}"
  when: clusters | length > 0
  run_once: true
